<script src="https://unpkg.com/swiper@8/swiper-bundle.min.js" defer></script>
<script src="{{'product-cards-swiper.js' | asset_url}}" defer></script>
{{ 'section-product-cards.css' | asset_url | stylesheet_tag }}

<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"
>

<section class="product-cards">
  <div class="swiper section-content">
    <div class="swiper-wrapper">
      {% for block in section.blocks %}
        {% assign product = block.settings.product %}
        {% assign color = block.settings.product_card_color %}

        {% if product.available %}
          <div class="swiper-slide">
            {% render 'product-card',
              product: product,
              color: color,
              productCardClass: 'product-cards__swiper-slide_color'
            %}
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <div class="swiper-pagination"></div>
  </div>
</section>

{% schema %}
{
  "name": "Product cards",
  "blocks": [
    {
      "name": "Products block",
      "type": "products_block",
      "settings": [
        { "type": "product", "id": "product", "label": "Product" },
        { "type": "color", "id": "product_card_color", "label": "Card color", "default": "#d3fbd9" }
      ]
    }
  ],
  "presets": [{ "name": "Product cards" }]
}
{% endschema %}
